<!-- Author: Manik Roy -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Texte - Text Editor</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/25/25423.png" type="image/png"/>
<style>
/* Global */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Tahoma,Arial,sans-serif;background:#f0f0f3;color:#333;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:20px;transition:background .3s,color .3s;}
body.dark{background:#1c1c1e;color:#f0f0f0;}
h1{margin-bottom:20px;text-align:center;}
footer{margin-top:15px;text-align:center;font-size:12px;color:#888;}

/* Container */
.editor-container{width:100%;max-width:900px;background:#e0e0e0;border-radius:20px;box-shadow:9px 9px 16px #bebebe,-9px -9px 16px #ffffff;padding:15px;display:flex;flex-direction:column;}
body.dark .editor-container{background:#2c2c2e;box-shadow:9px 9px 16px #1a1a1c,-9px -9px 16px #404044;}

/* Toolbar */
.toolbar{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px;}
.toolbar button,.toolbar select{padding:8px 12px;border:none;border-radius:10px;background:#f0f0f3;box-shadow:4px 4px 6px #bebebe,-4px -4px 6px #ffffff;font-size:14px;cursor:pointer;transition:.2s;}
.toolbar button:hover,.toolbar select:hover{transform:translateY(-2px);}
body.dark .toolbar button,body.dark .toolbar select{background:#2c2c2e;box-shadow:4px 4px 6px #1a1a1c,-4px -4px 6px #404044;color:#f0f0f0;}

/* Editor */
#editor{min-height:400px;background:#f0f0f3;border-radius:15px;padding:15px;overflow-y:auto;outline:none;box-shadow:inset 4px 4px 6px #bebebe,inset -4px -4px 6px #ffffff;}
body.dark #editor{background:#2c2c2e;box-shadow:inset 4px 4px 6px #1a1a1c,inset -4px -4px 6px #404044;color:#f0f0f0;}
#editor img{display:block;margin:10px 0;border-radius:8px;max-width:100%;height:auto;}
#editor img.resizable{resize:both;overflow:auto;}

/* Highlight */
mark.highlight{background:yellow;color:black;border-radius:3px;}

@media(max-width:600px){
 .toolbar{flex-direction:column;}
 .toolbar button,.toolbar select{width:100%;}
}
</style>
</head>
<body>
<h1>Texte</h1>
<div class="editor-container">
  <div class="toolbar">
    <button onclick="format('bold')"><b>B</b></button>
    <button onclick="format('italic')"><i>I</i></button>
    <button onclick="format('underline')"><u>U</u></button>
    <button onclick="format('justifyLeft')">Left</button>
    <button onclick="format('justifyCenter')">Center</button>
    <button onclick="format('justifyRight')">Right</button>
    <button onclick="format('justifyFull')">Justify</button>
    <button onclick="format('insertUnorderedList')">â€¢ List</button>
    <button onclick="format('insertOrderedList')">1. List</button>

    <select onchange="setFontSize(this.value)">
      <option value="">Font Size</option>
      <option value="10px">10px</option>
      <option value="12px">12px</option>
      <option value="14px">14px</option>
      <option value="18px">18px</option>
      <option value="24px">24px</option>
      <option value="32px">32px</option>
      <option value="48px">48px</option>
    </select>

    <select id="language" onchange="setLanguage(this.value)">
      <!-- âœ… 22 Indian official languages -->
      <option value="en">English</option>
      <option value="hi">Hindi</option><option value="bn">Bengali</option>
      <option value="te">Telugu</option><option value="mr">Marathi</option>
      <option value="ta">Tamil</option><option value="ur">Urdu</option>
      <option value="gu">Gujarati</option><option value="kn">Kannada</option>
      <option value="ml">Malayalam</option><option value="or">Odia</option>
      <option value="pa">Punjabi</option><option value="as">Assamese</option>
      <option value="ma">Maithili</option><option value="sd">Sindhi</option>
      <option value="ne">Nepali</option><option value="si">Sinhala</option>
      <option value="bo">Bodo</option><option value="ka">Konkani</option>
      <option value="sa">Sanskrit</option><option value="ks">Kashmiri</option>
      <!-- âœ… 22 world languages (unique, alphabetically) -->
      <option value="ar-eg">Arabic (Egyptian)</option>
      <option value="my">Burmese</option>
      <option value="en-uk">English (UK)</option>
      <option value="fr">French</option>
      <option value="de">German</option>
      <option value="ha">Hausa</option>
      <option value="it">Italian</option>
      <option value="ja">Japanese</option>
      <option value="jv">Javanese</option>
      <option value="ko">Korean</option>
      <option value="ms">Malay</option>
      <option value="zh">Mandarin Chinese</option>
      <option value="fa">Persian (Farsi)</option>
      <option value="pt">Portuguese</option>
      <option value="ru">Russian</option>
      <option value="es">Spanish</option>
      <option value="sw">Swahili</option>
      <option value="th">Thai</option>
      <option value="tr">Turkish</option>
      <option value="vi">Vietnamese</option>
      <option value="wuu">Wu Chinese</option>
      <option value="yo">Yoruba</option>
    </select>

    <button onclick="toggleDarkMode()">ðŸŒ“ Dark Mode</button>
    <button onclick="saveFile('txt')">Save TXT</button>
    <button onclick="savePDFPrint()">Save PDF</button>
    <button onclick="saveFile('docx')">Save DOCX</button>
    <button onclick="insertImage()">Insert Image</button>
    <button onclick="clearEditor()">Clear</button>
    <button onclick="undoEditor()">Undo</button>
    <button onclick="redoEditor()">Redo</button>
    <button onclick="copyToClipboard()">Copy</button>
    <button onclick="selectAllEditor()">Select All</button>
    <button onclick="findReplaceEditor()">Find & Replace</button>
    <button onclick="checkReadability()">Check Readability</button>
  </div>

  <div id="editor" contenteditable="true" spellcheck="true"></div>
  <div id="readabilityResult" style="margin-top:10px;"></div>
</div>
<footer>Â© Texte 2025</footer>

<script>
/* Basic Formatting */
function format(c,v=null){document.execCommand(c,false,v);}
function toggleDarkMode(){document.body.classList.toggle('dark');}
function setLanguage(v){document.getElementById('editor').lang=v;}

/* Font Size (pixel) */
function setFontSize(size){
 const sel=window.getSelection();
 if(!sel.rangeCount) return;
 const range=sel.getRangeAt(0);
 if(range.collapsed) return;
 const span=document.createElement('span');
 span.style.fontSize=size;
 span.appendChild(range.extractContents());
 range.insertNode(span);
}

/* Image Upload */
function insertImage(){
 const input=document.createElement('input');
 input.type='file'; input.accept='image/*';
 input.onchange=e=>{
   const file=e.target.files[0];
   if(!file) return;
   const rd=new FileReader();
   rd.onload=evt=>{
     const img=document.createElement('img');
     img.src=evt.target.result;
     img.classList.add('resizable');
     const r=window.getSelection().getRangeAt(0);
     r.insertNode(img); r.collapse(false);
   };
   rd.readAsDataURL(file);
 };
 input.click();
}

/* Drag & Drop */
const editor=document.getElementById('editor');
editor.addEventListener('dragover',e=>{e.preventDefault();editor.style.border="2px dashed #888";});
editor.addEventListener('dragleave',e=>{e.preventDefault();editor.style.border="none";});
editor.addEventListener('drop',e=>{
 e.preventDefault();editor.style.border="none";
 [...e.dataTransfer.files].forEach(file=>{
  if(file.type.startsWith('image/')){
   const rd=new FileReader();
   rd.onload=evt=>{
     const img=document.createElement('img');
     img.src=evt.target.result;
     img.classList.add('resizable');
     const r=window.getSelection().getRangeAt(0);
     r.insertNode(img);
   };
   rd.readAsDataURL(file);
 }});
});

/* Save TXT/DOCX/PDF */
function saveFile(t){
 if(t==='txt'){
  let b=new Blob([editor.innerText],{type:'text/plain'});
  let a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='document.txt'; a.click();
 }else{
  let html="<html><body>"+editor.innerHTML+"</body></html>";
  let b=new Blob([html],{type:'application/msword'});
  let a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='document.docx'; a.click();
 }
}
function savePDFPrint(){
 const w=window.open('');
 w.document.write("<html><body>"+editor.innerHTML+"</body></html>");
 w.document.close(); w.focus(); w.print(); w.close();
}

/* Basic Tools */
function undoEditor(){document.execCommand('undo');}
function redoEditor(){document.execCommand('redo');}
function clearEditor(){if(confirm("Clear all content?")) editor.innerHTML='';}
function copyToClipboard(){navigator.clipboard.writeText(editor.innerText).then(()=>alert("Copied to clipboard"));}

/* Select All */
function selectAllEditor(){
 const r=document.createRange(); r.selectNodeContents(editor);
 const s=window.getSelection(); s.removeAllRanges(); s.addRange(r);
}

/* Find & Replace */
function findReplaceEditor(){
 const find=prompt("Find:"); if(!find) return;
 const rep=prompt("Replace with:"); if(rep===null) return;
 editor.innerHTML=editor.innerHTML.replace(/<mark class="highlight">(.*?)<\/mark>/g,'$1');
 const rx=new RegExp(find,'gi');
 editor.innerHTML=editor.innerHTML.replace(rx,m=>`<mark class="highlight">${rep}</mark>`);
 alert(`Replaced all "${find}" with "${rep}"`);
}

/* Readability + Word Count */
function checkReadability(){
 const text=editor.innerText.trim();
 const result=document.getElementById('readabilityResult');
 if(!text){ result.innerText=""; return; }
 const words=text.split(/\s+/).filter(w=>/[a-z]/i.test(w));
 const sentences=text.split(/[.!?]+/).filter(Boolean).length||1;
 const syll=words.reduce((s,w)=>s+countSyllables(w),0);
 const wc=words.length;
 const ASL=wc/sentences;
 const ASW=syll/wc;
 const score=206.835-(1.015*ASL)-(84.6*ASW);
 let desc="";
 if(score>=90)desc="Very Easy";
 else if(score>=80)desc="Easy";
 else if(score>=70)desc="Fairly Easy";
 else if(score>=60)desc="Standard";
 else if(score>=50)desc="Fairly Difficult";
 else if(score>=30)desc="Difficult";
 else desc="Very Difficult";
 result.innerText = `Readability: ${score.toFixed(1)} â€“ ${desc} | Words: ${wc}`;
}

/* Syllable Counter */
function countSyllables(word){
 word=word.toLowerCase();
 if(word.length<=3) return 1;
 word=word.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,'').replace(/^y/,'');
 const m=word.match(/[aeiouy]{1,2}/g);
 return m?m.length:1;
}
</script>
</body>
</html>
